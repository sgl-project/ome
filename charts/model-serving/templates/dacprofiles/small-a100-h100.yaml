apiVersion: ome.io/v1beta1
kind: DedicatedAIClusterProfile
metadata:
  name: small-a100-h100
spec:
  count: 1
  resources:
    limits:
      cpu: 40
      memory: 240Gi
      nvidia.com/gpu: 2
    requests:
      cpu: 40
      memory: 240Gi
      nvidia.com/gpu: 2
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.H100.8
                  - BM.GPU.A100-v2.8
                  - BM.GPU.B4.8
                  - BM.GPU4.8
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.A100-v2.8
                  - BM.GPU.B4.8
                  - BM.GPU4.8
        - weight: 1
          preference:
            matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.H100.8