apiVersion: ome.io/v1beta1
kind: DedicatedAIClusterProfile
metadata:
  name: medium-a100v2-h100
spec:
  count: 1
  resources:
    limits:
      cpu: 50
      memory: 240Gi
      nvidia.com/gpu: 4
    requests:
      cpu: 50
      memory: 240Gi
      nvidia.com/gpu: 4
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.H100.8
                  - BM.GPU.A100-v2.8
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.A100-v2.8
        - weight: 1
          preference:
            matchExpressions:
              - key: beta.kubernetes.io/instance-type
                operator: In
                values:
                  - BM.GPU.H100.8